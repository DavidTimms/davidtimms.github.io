<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Exploring Template Literal Types in TypeScript 4.1" /><meta name="author" content="David Timms" /><meta property="og:locale" content="en" /><meta name="description" content="TypeScript 4.1 has just been released. This edition of the language builds on the features introduced in version 4.0 with a group of new tools which provide typesafe ways to express common dynamic JavaScript patterns. As with most powerful type system features, they can also be used and abused in weird and wonderful ways." /><meta property="og:description" content="TypeScript 4.1 has just been released. This edition of the language builds on the features introduced in version 4.0 with a group of new tools which provide typesafe ways to express common dynamic JavaScript patterns. As with most powerful type system features, they can also be used and abused in weird and wonderful ways." /><link rel="canonical" href="https://davidtimms.github.io/programming-languages/typescript/2020/11/20/exploring-template-literal-types-in-typescript-4.1.html" /><meta property="og:url" content="https://davidtimms.github.io/programming-languages/typescript/2020/11/20/exploring-template-literal-types-in-typescript-4.1.html" /><meta property="og:site_name" content="David Timms" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-11-20T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Exploring Template Literal Types in TypeScript 4.1" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@David Timms" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"TypeScript 4.1 has just been released. This edition of the language builds on the features introduced in version 4.0 with a group of new tools which provide typesafe ways to express common dynamic JavaScript patterns. As with most powerful type system features, they can also be used and abused in weird and wonderful ways.","url":"https://davidtimms.github.io/programming-languages/typescript/2020/11/20/exploring-template-literal-types-in-typescript-4.1.html","@type":"BlogPosting","headline":"Exploring Template Literal Types in TypeScript 4.1","dateModified":"2020-11-20T00:00:00+00:00","datePublished":"2020-11-20T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://davidtimms.github.io/programming-languages/typescript/2020/11/20/exploring-template-literal-types-in-typescript-4.1.html"},"author":{"@type":"Person","name":"David Timms"},"@context":"https://schema.org"}</script><title>Exploring Template Literal Types in TypeScript 4.1 | David Timms</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="David Timms"><meta name="application-name" content="David Timms"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">David Timms</a></div><div class="site-subtitle font-italic">Thoughts on code</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG â€º <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Exploring Template Literal Types in TypeScript 4.1</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Exploring Template Literal Types in TypeScript 4.1</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> David Timms </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Nov 20, 2020, 12:00 AM +0000" >Nov 20, 2020<i class="unloaded">2020-11-20T00:00:00+00:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1694 words">9 min read</span></div></div><div class="post-content"><p><a href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-1/">TypeScript 4.1 has just been released.</a> This edition of the language builds on the features <a href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-0/">introduced in version 4.0</a> with a group of new tools which provide typesafe ways to express common dynamic JavaScript patterns. As with most powerful type system features, they can also be used and abused in weird and wonderful ways.</p><p>One of the most interesting new features is <strong>template literal types</strong>. Back in ES2015, a new string syntax called a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literal</a> was added to JavaScript, providing a convenient and readable way to insert values into strings. These are strings delimited by backticks which evaluate any expression surrounded by <code class="language-plaintext highlighter-rouge">${</code> â€¦ <code class="language-plaintext highlighter-rouge">}</code>, inserting the result into the string.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Anders</span><span class="dl">"</span><span class="p">;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Hello, </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span> <span class="c1">// prints "Hello, Anders!"</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`I said, HELLO </span><span class="p">${</span><span class="nx">name</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()}</span><span class="s2">!`</span><span class="p">);</span> <span class="c1">// print "I said, HELLO ANDERS!"</span> </code></div></div><p>In TypeScript 4.1, you can now use the template literal syntax in <em>types</em> as well as <em>values</em>. This means if you have a type which represents a single string literal or, more likely, a union of multiple string literals, you can use a template literal type to create a new string literal type derived from the old one.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">type</span> <span class="nx">Animal</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">shark</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">giraffe</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">platypus</span><span class="dl">"</span><span class="p">;</span> <span class="kd">type</span> <span class="nx">BabyAnimal</span> <span class="o">=</span> <span class="s2">`baby-</span><span class="p">${</span><span class="nx">Animal</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span> <span class="c1">// = "baby-shark" | "baby-giraffe" | "baby-platypus"</span> </code></div></div><p>As the example above shows, the transformation is distributed over the union, being applied to each member separately, then producing a union of the results. If you include multiple union types in the template literal, it produces every combination.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">type</span> <span class="nx">Animal</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">shark</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">giraffe</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">platypus</span><span class="dl">"</span><span class="p">;</span> <span class="kd">type</span> <span class="nx">Age</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">baby</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">adolescent</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">old</span><span class="dl">"</span><span class="p">;</span> <span class="kd">type</span> <span class="nx">BabyAnimal</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">Age</span><span class="p">}</span><span class="s2">-</span><span class="p">${</span><span class="nx">Animal</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span> <span class="c1">// = "baby-shark" |</span> <span class="c1">// "baby-giraffe" |</span> <span class="c1">// "baby-platypus" |</span> <span class="c1">// "adolescent-shark" |</span> <span class="c1">// "adolescent-giraffe" |</span> <span class="c1">// "adolescent-platypus" |</span> <span class="c1">// "old-shark" |</span> <span class="c1">// "old-giraffe" |</span> <span class="c1">// "old-platypus"</span> </code></div></div><p>As well as building up new string literal types from shorter pieces, we can also extract parts of the string by matching a pattern. To do this we need to combine template literal types with <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-inference-in-conditional-types">conditional types and the <code class="language-plaintext highlighter-rouge">infer</code> keyword</a>.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">type</span> <span class="nx">ExtractVerb</span><span class="o">&lt;</span><span class="nx">S</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">S</span> <span class="kd">extends</span> <span class="s2">`</span><span class="p">${</span><span class="nx">infer</span> <span class="nx">Verb</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">infer</span> <span class="nx">Activity</span><span class="p">}</span><span class="s2">`</span> <span class="p">?</span> <span class="nx">Verb</span> <span class="p">:</span> <span class="nx">never</span><span class="p">;</span> <span class="kd">type</span> <span class="nx">Verbs</span> <span class="o">=</span> <span class="nx">ExtractVerb</span><span class="o">&lt;</span><span class="dl">"</span><span class="s2">play chess</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">write code</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">read hacker news</span><span class="dl">"</span><span class="o">&gt;</span> <span class="c1">// = "play" | "write" | "read"</span> </code></div></div><p>This means we can break down a string into its substrings and return different types based on the contents of those substrings. That is everything we need to implement a simple parser. Letâ€™s look at some potential applications.</p><h2 id="routing">Routing</h2><p>In Node.js web frameworks like <a href="https://expressjs.com">Express</a>, it is common to define URL routing rules by using a path pattern given as a string. These strings can contain placeholders to represent dynamic parts of the path like IDs and slugs. Express uses a colon prefix for these path parameters. You can then access the values of these parameters in the route handler function using the object <code class="language-plaintext highlighter-rouge">req.params</code>.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/users/:userId/posts/:postId</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">userId</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">userId</span><span class="p">;</span> <span class="kd">const</span> <span class="nx">postId</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">posId</span><span class="p">;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s2">`Requested post </span><span class="p">${</span><span class="nx">postId</span><span class="p">}</span><span class="s2"> from user </span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span> <span class="p">});</span> </code></div></div><p>The code above will be perfectly acceptable to the TypeScript compiler, but if you run it, youâ€™ll notice the server responds with something like this:</p><blockquote><p>Requested post undefined from user 12</p></blockquote><p>There is a typo in the function, but TypeScript did not complain. That is because the type of <code class="language-plaintext highlighter-rouge">req.params</code> is a <code class="language-plaintext highlighter-rouge">ParamsDictionary</code>.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kr">interface</span> <span class="nx">ParamsDictionary</span> <span class="p">{</span> <span class="p">[</span><span class="nx">key</span><span class="p">:</span> <span class="kr">string</span><span class="p">]:</span> <span class="kr">string</span><span class="p">;</span> <span class="p">}</span> </code></div></div><p>This type just says it is an object with string keys and string values. It knows nothing about which keys the object will actually have at runtime, so it isnâ€™t much better than <code class="language-plaintext highlighter-rouge">any</code>. Template literal types allow us to parse the path to produce a safe and accurate type for <code class="language-plaintext highlighter-rouge">req.params</code>.</p><p>First, we need a generic type which can parse our path string literal to extract the parameters preceded by a colon. At the type level, we donâ€™t have normal data structures like arrays, so we will need to represent the parameters as a union.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">type</span> <span class="nx">PathParams</span><span class="o">&lt;</span><span class="nx">Path</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">Path</span> <span class="kd">extends</span> <span class="s2">`:</span><span class="p">${</span><span class="nx">infer</span> <span class="nx">Param</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">infer</span> <span class="nx">Rest</span><span class="p">}</span><span class="s2">`</span> <span class="p">?</span> <span class="nx">Param</span> <span class="o">|</span> <span class="nx">PathParams</span><span class="o">&lt;</span><span class="nx">Rest</span><span class="o">&gt;</span> <span class="p">:</span> <span class="nx">Path</span> <span class="kd">extends</span> <span class="s2">`:</span><span class="p">${</span><span class="nx">infer</span> <span class="nx">Param</span><span class="p">}</span><span class="s2">`</span> <span class="p">?</span> <span class="nx">Param</span> <span class="p">:</span> <span class="nx">Path</span> <span class="kd">extends</span> <span class="s2">`</span><span class="p">${</span><span class="nx">infer</span> <span class="nx">_Prefix</span><span class="p">}</span><span class="s2">:</span><span class="p">${</span><span class="nx">infer</span> <span class="nx">Rest</span><span class="p">}</span><span class="s2">`</span> <span class="p">?</span> <span class="nx">PathParams</span><span class="o">&lt;</span><span class="s2">`:</span><span class="p">${</span><span class="nx">Rest</span><span class="p">}</span><span class="s2">`</span><span class="o">&gt;</span> <span class="p">:</span> <span class="nx">never</span><span class="p">;</span> </code></div></div><p>It may look a little scary, but once you break it down, itâ€™s not too bad.</p><ul><li>The first case matches parameters at the start or middle of the path.<br /> e.g. <code class="language-plaintext highlighter-rouge">":userId/posts/:postId"</code>.<li>The second case matches parameters at the end of the path.<br /> e.g. <code class="language-plaintext highlighter-rouge">":postId"</code>.<li>The third matches strings with some other content before a parameter and strips it away.<br /> e.g. <code class="language-plaintext highlighter-rouge">"/posts/:postId"</code>.<li>In the fourth and final case where none of the three patterns match, we return the <code class="language-plaintext highlighter-rouge">never</code> type, because this behaves like an empty set when used like a union.</ul><p>In the first and third cases it recursively calls itself with a shorter section of the string.</p><p>Applying this type to the path from above gives the parameter names, as we expect.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">type</span> <span class="nx">ParamNames</span> <span class="o">=</span> <span class="nx">PathParams</span><span class="o">&lt;</span><span class="dl">"</span><span class="s2">/users/:userId/posts/:postId</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// = "userId" | "postId"</span> </code></div></div><p>We can use a mapped type to generate an object with those parameter names as keys.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">type</span> <span class="nx">PathArgs</span><span class="o">&lt;</span><span class="nx">Path</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="nx">K</span> <span class="k">in</span> <span class="nx">PathParams</span><span class="o">&lt;</span><span class="nx">Path</span><span class="o">&gt;</span><span class="p">]:</span> <span class="kr">string</span> <span class="p">};</span> <span class="kd">type</span> <span class="nx">Params</span> <span class="o">=</span> <span class="nx">PathArgs</span><span class="o">&lt;</span><span class="dl">"</span><span class="s2">/users/:userId/posts/:postId</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// = { userId: string, postId: string }</span> </code></div></div><p>Great! Thatâ€™s the type we want for <code class="language-plaintext highlighter-rouge">req.params</code>.</p><p>Now all that is left to do is to use this type in the routing method of our web framework.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="p">{</span> <span class="kd">get</span><span class="o">&lt;</span><span class="nx">P</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span><span class="p">(</span> <span class="na">path</span><span class="p">:</span> <span class="nx">P</span><span class="p">,</span> <span class="na">handler</span><span class="p">:</span> <span class="p">(</span><span class="na">req</span><span class="p">:</span> <span class="p">{</span> <span class="na">params</span><span class="p">:</span> <span class="nx">PathArgs</span><span class="o">&lt;</span><span class="nx">P</span><span class="o">&gt;</span> <span class="p">},</span> <span class="na">res</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">,</span> <span class="p">):</span> <span class="k">void</span> <span class="p">{</span> <span class="c1">// web framework goes here...</span> <span class="p">}</span> <span class="c1">// other methods...</span> <span class="p">};</span> </code></div></div><p><em><strong>NOTE:</strong> In a real implementation, <code class="language-plaintext highlighter-rouge">req</code> would have many other properties and <code class="language-plaintext highlighter-rouge">res</code> would be strongly typed. I have omitted those details to simplify this example.</em></p><p>Now, the compiler catches the typo in our route handler. It even provides a suggestion to fix it!</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/users/:userId/posts/:postId</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">userId</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">userId</span><span class="p">;</span> <span class="kd">const</span> <span class="nx">postId</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">postld</span><span class="p">;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s2">`Requested post </span><span class="p">${</span><span class="nx">postId</span><span class="p">}</span><span class="s2"> from user </span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span> <span class="p">});</span> </code></div></div><blockquote><p><code class="language-plaintext highlighter-rouge">Property 'postld' does not exist on type 'PathArgs&lt;"/users/:userId/posts/:postId"&gt;'. Did you mean 'postId'?</code></p></blockquote><h2 id="dispatching-actions">Dispatching Actions</h2><p>Itâ€™s a common pattern in many applications to represent actions in the system as values. This lets you easily track history, pass the actions over a network, and make code easier to test. The types to represent our actions might look something like this.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">type</span> <span class="nx">BakeBrownies</span> <span class="o">=</span> <span class="p">{</span> <span class="na">tag</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BAKE_BROWNIES</span><span class="dl">"</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="kr">number</span> <span class="p">};</span> <span class="kd">type</span> <span class="nx">EatBrownie</span> <span class="o">=</span> <span class="p">{</span> <span class="na">tag</span><span class="p">:</span> <span class="dl">"</span><span class="s2">EAT_BROWNIE</span><span class="dl">"</span> <span class="p">};</span> <span class="kd">type</span> <span class="nx">Action</span> <span class="o">=</span> <span class="nx">BakeBrownies</span> <span class="o">|</span> <span class="nx">EatBrownie</span><span class="p">;</span> </code></div></div><p>Eventually we need to do something with these action objects, so letâ€™s write a simple class to handle them.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">class</span> <span class="nx">BrownieCounter</span> <span class="p">{</span> <span class="nx">brownieCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">bakeBrownies</span><span class="p">(</span><span class="nx">action</span><span class="p">:</span> <span class="nx">BakeBrownies</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">brownieCount</span> <span class="o">+=</span> <span class="nx">action</span><span class="p">.</span><span class="nx">quantity</span><span class="p">;</span> <span class="p">}</span> <span class="nx">eatBrownie</span><span class="p">(</span><span class="nx">action</span><span class="p">:</span> <span class="nx">EatBrownie</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">brownieCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Om nom nom</span><span class="dl">"</span><span class="p">);</span> <span class="k">this</span><span class="p">.</span><span class="nx">brownieCount</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Noooooo!</span><span class="dl">"</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span> </code></div></div><p>To glue them together, weâ€™ll need a function which takes the action and passes it to the correct method of our <code class="language-plaintext highlighter-rouge">BrownieCounter</code>.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">function</span> <span class="nx">dispatchAction</span><span class="p">(</span><span class="nx">brownieCounter</span><span class="p">:</span> <span class="nx">BrownieCounter</span><span class="p">,</span> <span class="nx">action</span><span class="p">:</span> <span class="nx">Action</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span> <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span> <span class="k">case</span> <span class="dl">"</span><span class="s2">BAKE_BROWNIES</span><span class="dl">"</span><span class="p">:</span> <span class="nx">brownieCounter</span><span class="p">.</span><span class="nx">bakeBrownies</span><span class="p">(</span><span class="nx">action</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span> <span class="k">case</span> <span class="dl">"</span><span class="s2">EAT_BROWNIE</span><span class="dl">"</span><span class="p">:</span> <span class="nx">brownieCounter</span><span class="p">.</span><span class="nx">eatBrownie</span><span class="p">(</span><span class="nx">action</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span> </code></div></div><p>This is ok for now, but as we add more actions to our program, itâ€™s going to get annoying having to add a new case for every one. Since the method names on our <code class="language-plaintext highlighter-rouge">BrownieCounter</code> are just camel case versions of the action tags, we can rewrite <code class="language-plaintext highlighter-rouge">dispatchAction</code> to generate the method name and call it. We just need a little <code class="language-plaintext highlighter-rouge">snakeCaseToCamelCase</code> helper function.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">function</span> <span class="nx">dispatchAction</span><span class="p">(</span><span class="nx">brownieCounter</span><span class="p">:</span> <span class="nx">BrownieCounter</span><span class="p">,</span> <span class="nx">action</span><span class="p">:</span> <span class="nx">Action</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span> <span class="p">(</span><span class="nx">brownieCounter</span> <span class="k">as</span> <span class="kr">any</span><span class="p">)[</span><span class="nx">snakeCaseToCamelCase</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">tag</span><span class="p">)](</span><span class="nx">action</span><span class="p">);</span> <span class="p">}</span> <span class="kd">function</span> <span class="nx">snakeCaseToCamelCase</span><span class="p">(</span><span class="nx">snakeCaseString</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">string</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span> <span class="nx">snakeCaseString</span> <span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">_</span><span class="dl">"</span><span class="p">)</span> <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">word</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">i</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">?</span> <span class="nx">word</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">:</span> <span class="nx">word</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">word</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">word</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">())</span> <span class="p">)</span> <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">""</span><span class="p">)</span> <span class="p">);</span> <span class="p">}</span> </code></div></div><p>This avoids the boilerplate, but itâ€™s a step backwards for type safety. As the type signature of <code class="language-plaintext highlighter-rouge">snakeCaseToCamelCase</code> only says it returns a string, the compiler has no way to know whether that string will be a valid method name for <code class="language-plaintext highlighter-rouge">BrownieCounter</code>, so we have to cast to <code class="language-plaintext highlighter-rouge">any</code> to allow it. Even worse, if we add a new action to the program, but forget to add a method to <code class="language-plaintext highlighter-rouge">BrownieCounter</code> to handle it, we wonâ€™t get a type error. It will not be until runtime that we see this sad message.</p><blockquote><p><code class="language-plaintext highlighter-rouge">brownieCounter[snakeCaseToCamelCase(...)] is not a function</code></p></blockquote><p>Luckily, with TypeScript 4.1, we no longer need to choose between boilerplate and type safety. Using template literal types we can reimplement our case conversion at the type level. This requires another handy new feature - four new types for manipulating string literal types called <code class="language-plaintext highlighter-rouge">Uppercase</code>, <code class="language-plaintext highlighter-rouge">Lowercase</code>, <code class="language-plaintext highlighter-rouge">Capitalize</code> and <code class="language-plaintext highlighter-rouge">Uncapitalize</code>.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">type</span> <span class="nx">SnakeCaseToCamelCase</span><span class="o">&lt;</span><span class="nx">S</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">S</span> <span class="kd">extends</span> <span class="s2">`</span><span class="p">${</span><span class="nx">infer</span> <span class="nx">FirstWord</span><span class="p">}</span><span class="s2">_</span><span class="p">${</span><span class="nx">infer</span> <span class="nx">Rest</span><span class="p">}</span><span class="s2">`</span> <span class="p">?</span> <span class="s2">`</span><span class="p">${</span><span class="nx">Lowercase</span><span class="o">&lt;</span><span class="nx">FirstWord</span><span class="o">&gt;</span><span class="p">}${</span><span class="nx">SnakeCaseToPascalCase</span><span class="o">&lt;</span><span class="nx">Rest</span><span class="o">&gt;</span><span class="p">}</span><span class="s2">`</span> <span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">Lowercase</span><span class="o">&lt;</span><span class="nx">S</span><span class="o">&gt;</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span> <span class="kd">type</span> <span class="nx">SnakeCaseToPascalCase</span><span class="o">&lt;</span><span class="nx">S</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">S</span> <span class="kd">extends</span> <span class="s2">`</span><span class="p">${</span><span class="nx">infer</span> <span class="nx">FirstWord</span><span class="p">}</span><span class="s2">_</span><span class="p">${</span><span class="nx">infer</span> <span class="nx">Rest</span><span class="p">}</span><span class="s2">`</span> <span class="p">?</span> <span class="s2">`</span><span class="p">${</span><span class="nx">Capitalize</span><span class="o">&lt;</span><span class="nx">Lowercase</span><span class="o">&lt;</span><span class="nx">FirstWord</span><span class="o">&gt;&gt;</span><span class="p">}${</span><span class="nx">SnakeCaseToPascalCase</span><span class="o">&lt;</span><span class="nx">Rest</span><span class="o">&gt;</span><span class="p">}</span><span class="s2">`</span> <span class="p">:</span> <span class="nx">Capitalize</span><span class="o">&lt;</span><span class="nx">Lowercase</span><span class="o">&lt;</span><span class="nx">S</span><span class="o">&gt;&gt;</span><span class="p">;</span> <span class="kd">type</span> <span class="nx">BakeBrowniesCamelCase</span> <span class="o">=</span> <span class="nx">SnakeCaseToCamelCase</span><span class="o">&lt;</span><span class="dl">"</span><span class="s2">BAKE_BROWNIES</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// = "bakeBrownies"</span> </code></div></div><p>We can use this fancy new type to provide a more informative signature for our helper function.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">function</span> <span class="nx">snakeCaseToCamelCase</span><span class="o">&lt;</span><span class="nx">S</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span><span class="p">(</span> <span class="nx">snakeCaseString</span><span class="p">:</span> <span class="nx">S</span><span class="p">,</span> <span class="p">):</span> <span class="nx">SnakeCaseToCamelCase</span><span class="o">&lt;</span><span class="nx">S</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span> <span class="nx">snakeCaseString</span> <span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">_</span><span class="dl">"</span><span class="p">)</span> <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">word</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">i</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">?</span> <span class="nx">word</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">:</span> <span class="nx">word</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">word</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">word</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">())</span> <span class="p">)</span> <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">""</span><span class="p">)</span> <span class="p">)</span> <span class="k">as</span> <span class="nx">SnakeCaseToCamelCase</span><span class="o">&lt;</span><span class="nx">S</span><span class="o">&gt;</span> <span class="p">}</span> <span class="kd">const</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nx">snakeCaseToCamelCase</span><span class="p">(</span><span class="dl">"</span><span class="s2">BAKE_BROWNIES</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// has type "bakeBrownies"</span> </code></div></div><p>This lets us remove the unsafe type cast from <code class="language-plaintext highlighter-rouge">dispatchAction</code>.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">function</span> <span class="nx">dispatchAction</span><span class="p">(</span><span class="nx">brownieCounter</span><span class="p">:</span> <span class="nx">BrownieCounter</span><span class="p">,</span> <span class="nx">action</span><span class="p">:</span> <span class="nx">Action</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span> <span class="nx">brownieCounter</span><span class="p">[</span><span class="nx">snakeCaseToCamelCase</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">tag</span><span class="p">)](</span><span class="nx">action</span> <span class="k">as</span> <span class="kr">any</span><span class="p">);</span> <span class="p">}</span> </code></div></div><p>Unfortunately we still need to cast the <em>action</em> to <code class="language-plaintext highlighter-rouge">any</code>, as the compiler isnâ€™t quite smart enough to figure out that weâ€™ve picked the <em>right</em> method for handling the action. Still, itâ€™s a big improvement. If we forget to add a method to <code class="language-plaintext highlighter-rouge">BrownieCounter</code> for a new action, weâ€™ll get a nice clear error message pointing out our mistake.</p><div class="language-ts highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">type</span> <span class="nx">StealBrownie</span> <span class="o">=</span> <span class="p">{</span> <span class="na">tag</span><span class="p">:</span> <span class="dl">"</span><span class="s2">STEAL_BROWNIE</span><span class="dl">"</span> <span class="p">};</span> <span class="kd">type</span> <span class="nx">Action</span> <span class="o">=</span> <span class="nx">BakeBrownies</span> <span class="o">|</span> <span class="nx">EatBrownie</span> <span class="o">|</span> <span class="nx">StealBrownie</span><span class="p">;</span> </code></div></div><blockquote><p><code class="language-plaintext highlighter-rouge">Property 'stealBrownie' does not exist on type 'BrownieCounter'.</code></p></blockquote><p>Success!</p><h2 id="a-sql-database">A SQL Database</h2><p>These small examples are all well and good, but surely you couldnâ€™t use this technique to interpret something as complex as a SQL query?</p><p>Actually, you could. I know because <a href="https://github.com/codemix/ts-sql">Charles Pick of codemix has done just that.</a> Itâ€™s a brilliant demonstration of the power of the type system, but I wouldnâ€™t go uninstalling PostgreSQL just yet.</p><h2 id="thats-all-folks">Thatâ€™s All Folks</h2><p>I hope you enjoyed this dive into the world of template literal types.</p><p>If youâ€™ve spotted any errors in this post, <a href="https://github.com/DavidTimms/davidtimms.github.io/issues/new">please let me know by opening an issue on GitHub.</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming-languages/'>programming-languages</a>, <a href='/categories/typescript/'>typescript</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"></div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/typescript/effective.ts/2021/12/23/effective-ts-tutorial-part-one.html"><div class="card-body"> <span class="timeago small" >Dec 23, 2021<i class="unloaded">2021-12-23T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Effective.ts Tutorial - Part One</h3><div class="text-muted small"><p> Effective.ts is a library I recently released, which aims to make it easier to write safe, concurrent, fault-tolerant programs in TypeScript. It takes heavy inspiration from the way side effects ar...</p></div></div></a></div><div class="card"> <a href="/programming-languages/ocaml/2022/01/19/seven-days-of-ocaml.html"><div class="card-body"> <span class="timeago small" >Jan 19<i class="unloaded">2022-01-19T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Seven Days of OCaml</h3><div class="text-muted small"><p> A few weeks ago, I returned from an ill-advised excursion to London to discover that I had picked up COVID-19. Whoops. Luckily my symptoms were very mild, but I still had to remain in self-isolatio...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></span> <a href="/typescript/effective.ts/2021/12/23/effective-ts-tutorial-part-one.html" class="btn btn-outline-primary" prompt="Newer"><p>Effective.ts Tutorial - Part One</p></a></div></div></div></div><footer class="site-footer h-card"> <data class="u-url" href="/"></data><div class="wrapper"><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Â© 2022 David Timms</ul></div><div class="footer-col footer-col-2" style="text-align: right;"></div></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Do forgive me! No result could be found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
